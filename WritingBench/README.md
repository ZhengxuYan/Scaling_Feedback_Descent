# WritingBench: A Comprehensive Benchmark for Generative Writing
<p align="center">
  ğŸ“ƒ <a href="https://arxiv.org/abs/2503.05244" target="_blank">[Paper]</a> â€¢ ğŸš€ <a href="https://github.com/X-PLUG/WritingBench" target="_blank">[Github Repo]</a> â€¢ ğŸ† <a href="https://huggingface.co/spaces/WritingBench/WritingBench" target="_blank">[Leaderboard]</a> â€¢ ğŸ“ <a href="https://huggingface.co/AQuarterMile/WritingBench-Critic-Model-Qwen-7B" target="_blank">[Critic Model]</a> â€¢ âœï¸ <a href="https://huggingface.co/AQuarterMile/Writing-Model-Qwen-7B" target="_blank">[Writing Model]</a>
</p>

<div align="center">
  <img src="pics/construction.png" 
       alt="Benchmark Construction Pipeline"
       width="900">
</div>

## ğŸš€ What's New 

#### ```2025-11-27```
- Switch to **Claude-Sonnet-4-5** for evaluation.
  
#### ```2025-09-05```
- Switch to **Claude-Sonnet-4** for evaluation.
- Add scripts for response generation and score aggregation; see the [Quick Start](#-quick-start) section for details.
- Leaderboard update: introduced requirement-dimension scores and updated the latest LLM evaluation results.
    
#### ```2025-04-29```
- **ğŸ† Leaderboard Launch**: Explore evaluation results on [Hugging Face Leaderboard](https://huggingface.co/spaces/WritingBench/WritingBench) and [ModelScope Leaderboard](https://modelscope.cn/studios/WritingBench/WritingBench). Update latest LLM evaluations (Claude-3-7-Sonnet, o3, grok-3, etc)
  - Parameters for response generation: `top_p: 0.8`; `top_k: 20`; `temperature: 0.7`; `max_length: 16000` (or maximum allowed if less than 16000)
  - Parameters for scoring: `top_p: 0.95`; `top_k: (empty)`; `temperature: 1.0`; `max_length: 2048`
  - Leaderboard scores are scaled from 10 to 100 by multiplying by 10 for easier viewing.
- â€¼ï¸ Update [benchmark queries & criteria](https://github.com/X-PLUG/WritingBench/blob/main/benchmark_query/benchmark_all.jsonl) for improved assessment, including **1,000** queries and requirement dimension subsets. 
- â€¼ï¸ Update [evaluation prompt](https://github.com/X-PLUG/WritingBench/blob/main/prompt.py) for better scoring, and switch to using **Claude-3-7-Sonnet** for evaluation.
  
#### ```2025-03-10```
- We release the first version of WritingBench, including **1,239** writing queries and style/format/length dimension subsets.

## ğŸ“– Overview
WritingBench is a comprehensive benchmark for evaluating LLMs' writing capabilities across **1,000 real-world queries**, spanning:
- 6 primary domains 
- 100 fine-grained subdomains
- 1,500+ avg. tokens per query

WritingBench integrates diverse sources of materials. Each query is paired with **5 instance-specific criteria**, scoring either through LLM evaluators or through a finetuned critic model.


## ğŸ—ï¸ Benchmark Construction

WritingBench is built through a hybrid pipeline combining **Model-Augmented Query Generation** and **Human-in-the-Loop Refinement**, ensuring both diversity and real-world applicability. The construction process involves two key phases:

### ğŸ¤– Model-Augmented Query Generation

#### Phase 1: Initial Query Generation
Leverage LLMs to generate queries from a two-tiered domain pool grounded in real-world writing scenarios, consisting of 6 primary domains and 100 secondary subdomains, covering:
   - ğŸ”¬ Academic & Engineering
   - ğŸ’¼ Finance & Business
   - âš–ï¸ Politics & Law
   - ğŸ¨ Literature & Art
   - ğŸ“ Education
   - ğŸ“¢ Advertising & Marketing

####  Phase 2: Query Diversification
Enhance the diversity and practical applicability of queries by random selected strategies from **Query Refinement Guidance Pool**, covering:
- Style Adjustments (e.g., kid-friendly tone)
- Format Specifications (e.g., IEEE template)
- Length Constraints (e.g., 500-word summary)
- Personalization (e.g., educator's perspective)
- Content Specificity (e.g., 2023 Q3 metrics)
- Expression Optimization (query rewriting)

### âœï¸ Human-in-the-Loop Refinement

#### Phase 1: Material Collection
30 trained annotators collect necessary open-source materials (e.g., public financial statements or legal templates), guided by material requirements generated by LLMs.

#### Phase 2: Expert Screening & Optimization
5 experts conduct a delicate two-stage filtering process: 
- query adaptation: ambiguous or unrealistic queries are revised to better align with the provided materials and practical scenarios
- material pruning: redundant or irrelevant content is eliminated from the collected materials

## ğŸ“ˆ Evaluation Framework

<div align="center">
  <img src="pics/criteria.png" alt="Instance-Specific Criteria" width="800">
</div>

### Phase 1: Dynamic Criteria Generation
Given a query $q$ in the WritingBench, the LLM is prompted to automatically generate a set of five evaluation criteria, $C_q = \{c_1, \ldots, c_5\}$. Each criterion comprises three components: a concise name summarizing the criterion, an extended description elaborating on the evaluation focus, and detailed scoring rubrics.

### Phase 2: Rubric-based Scoring
For each criterion $c_i \in C_q$, the evaluator independently assigns a score on a 10-point scale to a response $r$, providing both a score and a justification.


## ğŸ›  Installation
```bash
git clone https://github.com/X-PLUG/WritingBench.git
```

## ğŸ“‚ Repository Structure
```bash
.
â”œâ”€â”€ generate_response.py      # Generation script
â”œâ”€â”€ evaluate_benchmark.py     # Evaluation script
â”œâ”€â”€ calculate_scores.py       # Scoring script
â”œâ”€â”€ prompt.py                 # Prompt templates
â”œâ”€â”€ evaluator/
â”‚   â”œâ”€â”€ __int__.py
â”‚   â”œâ”€â”€ critic.py             # Critic model evaluation interface
â”‚   â””â”€â”€ llm.py                # LLM evaluation interface
â””â”€â”€ benchmark_query/
    â”œâ”€â”€ benchmark_all.jsonl   # Full dataset (1,000 queries)
    â””â”€â”€ requirement/
        â”œâ”€â”€ style/           
        â”‚   â”œâ”€â”€ style_subset.jsonl    # requirement-involved subset for style
        â”‚   â””â”€â”€ style_subset_C.jsonl  # category-specific subset for style
        â”œâ”€â”€ format/          
        â”‚   â”œâ”€â”€ format_subset.jsonl    # requirement-involved subset for format
        â”‚   â””â”€â”€ format_subset_C.jsonl  # category-specific subset for format
        â””â”€â”€ length/         
            â”œâ”€â”€ length_subset.jsonl    # requirement-involved subset for length
            â””â”€â”€ length_subset_C.jsonl  # category-specific subset for length
```

## ğŸš€ Quick Start

### 1. Generation
Generate responses for the evaluation queries (you need to complete the API call in the `writer` function in `generate_response.py`),  or obtain the answers through any other method. Whatever approach you take, write the results to a file that follows exactly the same JSONL structure as the example `response_model.jsonl`.
```bash
python generate_response.py \
  --query_file query_set.jsonl \ # use files under benchmark_query/
  --output_file ./responses/response_model.jsonl \ # path to save response file
```

### 2. Scoring
First, Add your API credentials:
- For LLM-as-a-Judge, see `evaluator/llm.py`. Recommend using `Claude-3-7-Sonnet` for evaluation.
```bash
  self.api_key = "your_api_key_here"
  self.url = "Your API endpoint"
  self.model = "Chose your model name"
```bash
- For critic model, see `evaluator/critic.py`
```bash
  self.model = LLM(
      model="", # Your local path. Please download critic model from https://huggingface.co/AQuarterMile/WritingBench-Critic-Model-Qwen-7B.
      tensor_parallel_size=1, # Your tensor parallel size setting. Defaults to 1, indicating no parallelism
  )
```

Then choose appropriate evaluation sets from `benchmark_query/`.
```bash
python evaluate_benchmark.py \
  --evaluator critic \ # or claude
  --query_criteria_file query_set.jsonl \ # use files under benchmark_query/
  --input_file ./responses/response_model.jsonl \
  --output_file ./score_dir/score_model.jsonl
```

An example of `response_model.jsonl` used to store responses generated by the evaluated LLMs:
```bash
{"index": i, "response": "xxx"}
```

### 3. Calculation
Store all scoring results from the previous step in a folder, then aggregate the scores.
```bach
python calculate_scores.py \
  --score_dir ./score_dir \                   # Directory with JSONL score files produced in the previous stage
  --benchmark_file ./benchmark_query/benchmark_all.jsonl \  # Full benchmark file provided in the repository
  --output_excel ./scores.xlsx \              # Path to the aggregated-result Excel file to be generated
  --requirement_dir ./requirement             # Requirement folder included in the repository
```

## ğŸ¤ Contributing and Contact

WritingBench aims to be a reliable, comprehensive, and sustainable community resource for charting the frontiers of generative writing. If you are interested in leaderboard construction or any further discussion, please reach out via GitHub or email.


## ğŸ“ Citation

```
@misc{wu2025writingbench,
      title={WritingBench: A Comprehensive Benchmark for Generative Writing}, 
      author={Yuning Wu and Jiahao Mei and Ming Yan and Chenliang Li and Shaopeng Lai and Yuran Ren and Zijia Wang and Ji Zhang and Mengyue Wu and Qin Jin and Fei Huang},
      year={2025},
      url={https://arxiv.org/abs/2503.05244}, 
}
```
